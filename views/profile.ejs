
<% include ./partials/header.ejs %>

<div class="profile w-full min-h-screen bg-zinc-700 text-white pt-1">

    <div>

    </div>
    <div class="profdets flex flex-col items-center mt-10">
        <form id="uploadform" action="/fileupload" hidden method="post" enctype="multipart/form-data">
            <input type="file" name="image" id="">
        </form >
            <div class="relative">

                <span  id="uploadicon" class="w-8 h-8 absolute bottom-0 right-0 rounded-full flex items-center justify-center bg-zinc-200">
                    <i  class=" text-zinc-800 ri-pencil-line"></i>
                </span>
                

                <div class="w-32 h-32 rounded-full bg-zinc-200 overflow-hidden">
                    <img src="/images/uploads/<%= user.profileimage %>" alt="hello" class="w-full h-full object-cover">
                </div>

            </div>

      
        <h1 class="text-3xl font-semibold mt-5" > <%= user.name %> </h1>
        <h3 class="text-md" > @<%= user.username %> </h3>
        <a href="/edit" class="px-10 mt-5 py-1 bg-zinc-500 rounded-full text-xs font-semibold  "> Edit  </a>
        <a  href="/add" class="bg-red-600 px-10 py-2 mt-10 rounded-lg font-semibold text-sm">Add a New Post</a >
    </div>
    <div class="cards flex flex-wrap gap-10 px-10 mt-10">
        <div class="card">
            <div class="w-52 h-40 bg-zinc-200 rounded-lg overflow-hidden">
                <img src="images/uploads/<%= user?.posts[0]?.image %>" alt="" class="w-full h-full object-cover">

            </div>
            <a href="/show/posts" class=" inline-block text-xl font-semibold mt-5">Your Uploaded Pins</a>
            <h3 class="text-sm font-semibold opacity-60"> <%= user.posts.length %> </h3>

        </div>

        
    </div>
</div>

<script>

    document.querySelector("#uploadicon").addEventListener("click" , function(){
        document.querySelector("#uploadform input").click();
    })
 
    document.querySelector("#uploadform input").addEventListener("change" , function(){
        document.querySelector("#uploadform").submit()
    })

</script>

<% include ./partials/footer.ejs %>